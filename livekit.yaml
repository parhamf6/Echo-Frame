# LiveKit Configuration for Echo-Frame
# Audio + Data Channel focused (no video streaming)
# Production-ready with sensible defaults for watch party app

port: 7880

# Redis for distributed operation
redis:
  address: localhost:6379
  db: 0
  # To use sentinel remove the address key above and add the following
  # sentinel_master_name: livekit
  # sentinel_addresses:
  # - livekit-redis-node-0.livekit-redis-headless:26379
  # - livekit-redis-node-1.livekit-redis-headless:26379
  # If you use a different set of credentials for sentinel add
  # sentinel_username: user
  # sentinel_password: pass
  #
  # To use TLS with redis
  # tls:
  #   enabled: true
  #   # when set to true, LiveKit will not verify the server's certificate, defaults to true
  #   insecure: false
  #   server_name: myserver.com
  #   # file containing trusted root certificates for verification
  #   ca_cert_file: /path/to/ca.crt
  #   client_cert_file: /path/to/client.crt
  #   client_key_file: /path/to/client.key
  #
  # To use cluster remove the address key above and add the following
  # cluster_addresses:
  # - livekit-redis-node-0.livekit-redis-headless:6379
  # - livekit-redis-node-1.livekit-redis-headless:6380
  # And it will use the password key above as cluster password
  # And the db key will not be used due to cluster mode not support it.

# WebRTC configuration for audio + data channels
rtc:
  port_range_start: 50000
  port_range_end: 50100
  tcp_port: 7881
  use_external_ip: true
  stun_servers:
    - stun.l.google.com:19302
    - stun1.l.google.com:19302

# Logging
logging:
  level: info
  sample: false

# API Keys - Match backend config values
# From backend/echoframe_api/app/core/config.py
keys:
  devkey123456789abcdef: devsecret123456789abcdefghijklmnopqrstuvwxyz0123456789abcdef

# Room Configuration
# Audio-only watch party setup
room:
  auto_create: true
  enabled_codecs:
    - mime: audio/opus
  max_participants: 100
  empty_timeout: 300

# Node Limits
# Conservative limits suitable for audio + data channels
limit:
  bytes_per_sec: 500000
  num_tracks: 2
  subscription_limit_audio: 100

# Audio Configuration
# Optimized for voice chat
audio:
  active_level: 30
  min_percentile: 40
  update_interval: 200
  smooth_intervals: 4

# Webhooks
# Send events to backend for logging and notifications
# api_key must be one of the keys defined above
webhook:
  api_key: devkey123456789abcdef
  urls:
    - http://localhost:8000/api/v1/livekit/webhook

# Development mode
development: true